[#ftl]
<div class="firstTopnav">
    <a href="${base}" class="logo">
        <img src="${baseimg}/imgs/default/logo.png" alt="天才人生" title="天才人生首页" />
    </a>
    <div class="searchMiddle">
        <input type="text" placeholder="请输入搜索内容" id="keywordsearch" name="keyword"/>
        <a class="searchimg">
            <img src="${baseimg}/imgs/default/search.png" alt="搜索" title="搜索" />
        </a>
    </div>
    <div class="loginbox">
    	[#if me??]
    		<a [#if cid??]href="${base}/my/contribute?cid=${cid}"[#else]href="${base}/my/contribute"[/#if] class="votebtn">投稿</a>
		[#else]
        	<a class="votebtn pop-up" href="javascript:;">投稿</a>
    	[/#if]
        [#if me??]
			<a href="${base}/my/center/article" class="logined"><img [#if me.useravatar??]src="${me.useravatar}"[#else]src="${baseimg}/imgs/default/defaultimg.png"[/#if] [#if me.getIsUser()]class="userborder"[/#if]/></a>
			[#if me.getIsUser()]<img src="${baseimg}/imgs/default/prince.png" class="princeimg" alt="" />[/#if]
		[#else]
    		<a class="logined pop-up" href="javascript:;"><img src="${baseimg}/imgs/default/defaultimg.png"/></a>
    	[/#if]
    </div>
</div>
<div class="topnav">
    <ul class="navlist">
        [#if cataloguelist??]
        	[#list cataloguelist as map]
        		<li class="catalogue_${map["first"].cid} [#if pcid?? && pcid == map["first"].cid || cid?? && cid == map["first"].cid]current[/#if]">
		            <a href="${base}/catalogue/${map["first"].pcid}/${map["first"].cid}">
	                	${map["first"].name}
	                	[#if map["first"].cid == 3]
	                		<i class="classType">初中</i>
	                	[#elseif map["first"].cid == 4]
	                		<i class="classType">高中</i>
	                	[#elseif map["first"].cid == 5]
	                		<i class="classType">大学</i>
			            [/#if]
		            </a>
		            [#if map["second"]??]
		            	<ul class="rollnav">
		            	[#assign secondlist = map["second"]]
		            	[#list secondlist as item]
		            		<li><a href="${base}/catalogue/${item.pcid}/${item.cid}">${item.name}</a></li>
		            	[/#list]
		            	</ul>
		            [/#if]
		        </li>
        	[/#list]
        [/#if]
    </ul>
</div>

<script type="text/javascript">
    $(function () {
    	var cla = 0;
    	$("li[class^='catalogue_']").each(function(){ 
    		var tem = $(this).attr("class");
			if($(this).hasClass("current")){
				cla=1;
			}
		});
		if(cla==0){
			$(".catalogue_10").addClass("current");
		}
		
		//绑定查找事件
        $("#keywordsearch").bind("keydown", searchHandle);
        $(".searchimg").click(function () {
        	if ($("#keywordsearch").val().trim() == "") {
				document.location = '${SolrSearchUrl}/index';
        	} else {
        		window.location.href = "${base}/search?keyword=" + $("#keywordsearch").val();
        	}
        });
        
        //按enter键查找
		function searchHandle(event){
			if (event.keyCode==13) {
				if ($(this).val().trim() == "") {
					shakeHandle();
					$(this).blur();
					return;
				} else {
					window.location.href = "${base}/search?keyword=" + $("#keywordsearch").val();
				}
			}
		}
		//设置搜索框内容为空时抖动提示
		function shakeHandle() {
			window.location.href = "${SolrSearchUrl}/index";
		}
    
        $(window).scroll(function () {
            var windowScroll = $(window).scrollTop();
            if(windowScroll > 52) {
                $(".header_fix").css("top", "0");
            } else {
                $(".header_fix").css("top", "52px");
            }
        });
    });
</script>