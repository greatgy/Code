(function(a){a.fn.prize=function(){a(this).blur();var c=a(this).attr("id"),b=a(this),d={};d.href=href;a.get(getNoCachePath(base+"/ajax/prize/"+c),d,function(c){c?(updatePrizeCount(b,!0),a(b).children("img").each(function(){a(this).attr("data-isprize",!0);prizeBindEvetEach(this)})):(updatePrizeCount(b,!1),a(b).children("img").each(function(){a(this).attr("data-isprize",!1);prizeBindEvetEach(this)}))});prizeBindEvent()}})(jQuery);
function prizeBindEvent(){$("a[id^='btnprize'] img").each(function(){prizeBindEvetEach(this)})}function prizeBindEvetEach(a){"true"==$(a).attr("data-isprize")?($(a).attr("title","\u53d6\u6d88\u8d5e"),$(a).data("notcomment")?$(a).attr("src",baseimg+"/imgs/default/redheart.png"):$(a).attr("src",baseimg+"/imgs/default/zaned.png")):($(a).data("notcomment")?$(a).attr("src",baseimg+"/imgs/default/heart.png"):$(a).attr("src",baseimg+"/imgs/default/zan.png"),$(a).attr("title","\u70b9\u51fb\u8d5e"))}
function updatePrizeCount(a,c){var b=$(a).children("span").html();c?$(a).children("span").html(parseInt(b)+1):$(a).children("span").html(parseInt(b)-1)}
(function(a){function c(b){var c=b.data;a.get(getNoCachePath(base+"/my/ajax/collect/"+c.uid),{},function(a){console.log(a);a?collectPlusAjaxHandler(c):collectMinusAjaxHandler(c);updateCollect(a)})}a.fn.collect=function(b){b=a.extend({},{uid:"",collectClickHandler:c},b);0<a(this).length&&(b.uid=a(this).attr("id").replace("btncollect",""),b.obj=this,a(this).bind("click",b,b.collectClickHandler))}})(jQuery);
function collectMinusAjaxHandler(a){$(a.obj).find(".liwaysimg02").attr("src",baseimg+"/imgs/default/collect.png");$(a.obj).data("iscollect",!1)}function collectPlusAjaxHandler(a){$(a.obj).find(".liwaysimg02").attr("src",baseimg+"/imgs/default/collects.png");$(a.obj).data("iscollect",!0)}function updateCollect(a){var c=$("#articlecollectcount").html();a?$("#articlecollectcount").html(parseInt(c)+1):$("#articlecollectcount").html(parseInt(c)-1)}$(function(a){a(".shareBox a[id^='btncollect']").each(function(){a(this).collect()})});
function registerPraise(){$(".reply a[id^='btnprize']").each(function(){$(this).prize()});prizeBindEvent()}function unRegisterPraise(){$(".reply a[id^='btnprize']").each(function(){$(this).unbind("click")})}function collectBindEvet(){$("a[id^='btncollect'] img").each(function(){collectBindEvetEach(this)})}function collectBindEvetEach(a){$(a).data("iscollect")?$(a).attr("src",baseimg+"/imgs/default/collects.png"):$(a).attr("src",baseimg+"/imgs/default/collect.png")};
