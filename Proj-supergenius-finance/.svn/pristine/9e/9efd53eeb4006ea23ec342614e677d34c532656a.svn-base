package com.supergenius.web.finance.helper;

import java.util.Comparator;
import java.util.Locale;
import java.util.Map;
import java.util.TreeMap;

import org.springframework.web.multipart.MultipartFile;

import com.genius.core.base.constant.BaseStrDict;
import com.genius.core.base.utils.FileUtil;
import com.supergenius.server.finance.helper.BaseContributeHP;
import com.supergenius.xo.common.enums.EFinance;
import com.supergenius.xo.finance.service.ContributeSO;

/**
 * 投稿HP 
 * @author liushaomin
 */
public class ContributeHP extends BaseContributeHP{
	
	private static ContributeSO so;
	
	public static ContributeSO getSo() {
		if (so == null) {
			so = (ContributeSO) spring.getBean(ContributeSO.class);
		}
		return so;
	}
	
	/**
	 * 得到所有的投稿类型（不包括天才焦点类型）
	 * @return
	 */
	public static Map<String, String> getEFinanceMap() {
		Map<String, String> map = new TreeMap<>(new Comparator<String>() {
			public int compare(String k1, String k2) {
				return k1.compareTo(k2);
			}
		});
		for (EFinance e : EFinance.values()) {
			if (!e.toString().equals(EFinance.geniusfocus.toString())) {
				map.put(e.toString(), EFinance.getName(e, Locale.CHINA));
			}
		}
		return map;
	}

	/**
	 * @param fileimg
	 * @param string
	 * @param imgshowsizes
	 * @param imgUploadBasePath
	 * @author liushaomin
	 * @return 
	 */
	public static String resizeImage(MultipartFile fileimg, String path, int[][] imgsizes, String imgUploadBasePath) {
		String[] paths = FileUtil.resizeImage(fileimg, path, imgsizes, imgUploadBasePath);
		String data = null;
		if (path.length() != 0) {
			data = paths[0] + BaseStrDict.comma + paths[1] + BaseStrDict.comma + paths[2] + BaseStrDict.comma + paths[3];
		}
		return data;
	}

}
