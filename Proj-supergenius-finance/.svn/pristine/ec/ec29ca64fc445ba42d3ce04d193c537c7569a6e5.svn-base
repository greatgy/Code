[#ftl]
<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>搜索</title>
	<style type="text/css">
		.main{
			min-height:508px;
			padding-top:50px;
			width:1000px;
			font-size:14px;
		}
		.keyword{
			float:left;
		}
		.keyword input{
			width:400px; 
			height:30px;
			font:14px arial;
			outline:none;
		}
		.keyword input:focus{
			border:1px solid #eb6100;
		}
		.channel{
			margin-top:23px;
			text-align:left;
		}
		.channel input{
			margin-left:15px;
		}
		.channel input:first-child{
			margin-left:0px;
		}
		.db_btn{ 
			border:0px; 
			background:#eb6100; 
			font-size:16px; 
			display:inline;
			float:left;
			line-height:35px; 
			color:#FFF;
			width:98px; 
			height:35px;
			cursor:pointer;
		}
		.db_btn a{ 
			width:100%;
			height:100%;
			color:#fff;
		}
		.result{
			text-align:left;
			margin-top:50px;
			padding-left:20px;
			line-height:40px;
			font-size:14px;
		}
	</style>
	<script type="text/javascript">
		$(function(){
			$(".search_btn").bind("click", function(){
				var keyword = $(".keyword input[name='keyword']").val();
				if(keyword.trim() == "") {
					alert("请输入关键词");
					return;
				}
				var channel = $("input[name='channel']:radio:checked").val();
				$.get("${base}/ajax/search", {"keyword":keyword, "channel":channel }, function(result){
					if(result.length == 0){
						$(".result").html("抱歉，没有找到与<span style='color:red;'>&nbsp;“" + keyword + "”&nbsp;</span>相关的信息")
					}else{
						getResultHtml(result);
					}
				});
			});
			
			function getResultHtml(result){
				var html = "<ul>";
				var item = null;
				for(var i=0; i<result.length; i++){
					item = result[i]; 
					html += "<li>";
					if(item.channel == "finance"){
						html += '<a href="${base}/'+item.financetype+'/'+item.id+'" target="_blank">'+ result[i].title+'</a> &nbsp;来自：天财评论文章 &nbsp;' + item.createdate;
					}					
					if(item.channel == "debate"){
						html += '<a href="${base}/debate/'+item.id+'" target="_blank">'+ result[i].title+'</a> &nbsp;来自：论战 &nbsp;' + item.createdate;
					}					
					if(item.channel == "topic"){
						html += '<a href="${base}/topic/'+item.id+'" target="_blank">'+ result[i].title+'</a> &nbsp;来自：热门话题 &nbsp;' + item.createdate;
					}					
					html += "</li>"
				}
				html += "</ul>";
				$(".result").html(html);
			}
			[#if keyword?? && keyword != ""]
				$(".search_btn").click();
			[/#if]
		});
	</script>
</head>
<body>
	<div class="main">
		<div class="title">
			<div class="keyword">
				<input type="text" name="keyword" placeholder="请输入搜索关键词" value="${keyword}" />
			</div>
			<div class="db_btn search_btn">
				<a href="">开始搜索</a>
			</div>
		</div>
		<br />
		<div class="channel">
			<input type="radio" name="channel" value="finance" checked="checked">文章</input>
			<input type="radio" name="channel" value="debate" >论战</input>
			<input type="radio" name="channel" value="topic" >热门话题</input>
			<input type="radio" name="channel" value="author" >作者</input>
		</div>
		<div class="result">
		</div>
	</div>
</body>
</html>




