<div class="balance">
	<div class="left-data">
		<div class="left-arrow">
			<img src="<%= g.baseimg %>/imgs/default/lunzh2_hs.png" />
		</div>
		<a class="number-area left-number debate_vote" data-support="red"><%= this.left %></a>
	</div>
	<h4>投票</h4>
	<div class="right-data">
		<div class="right-arrow">
			<img src="<%= g.baseimg %>/imgs/default/lunzh2_lan.png" />
		</div>
		<a class="number-area right-number debate_vote"  data-support="blue"><%= this.right %></a>
	</div>
	<div class="balance-lever">
		<div class="left-lever"></div>
		<div class="right-lever"></div>
	</div>
	<img class="balance-pivot" src="<%= g.baseimg %>/imgs/default/lunzh2_db.png">
</div>
<script>
$(".debate_vote").click(function(){
	if(hasvote != -1){// 已经投过票，不请求后台
		alertvote(hasvote);
		return;
	}
	var support = $(this).data("support");
	if(support == "red") {
		isred = true;
	}else{
		isred = false;
	}
	var curobj = this;
	$.get("<%= g.base %>/debate/vote/" + debateuid, {isred:isred}, function(data){
		if(data.success == true){
			var curvote = $(curobj).html();
			$(curobj).html(parseInt(curvote) + 1);
			new Components.BalancePanel($('.tp_midd'), {
				left : parseInt($(".left-number").html()),
				right : parseInt($(".right-number").html())
			});	
			handleHasvote(isred);
		}else{
			if(data.voted == true){
				alertvote(data.isred);
			}else{
				alert("未知错误，投票失败，请刷新重试！");
			}
		}
	});
});
</script>